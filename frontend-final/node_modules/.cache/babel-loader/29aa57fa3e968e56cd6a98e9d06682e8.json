{"ast":null,"code":"/* import React, { useEffect, useState } from 'react';\n\nconst SpotifyPlayer = () => {\n  const [player, setPlayer] = useState(null);\n  const [deviceId, setDeviceId] = useState(null);\n  const [error, setError] = useState(null); // üÜï\n\n  useEffect(() => {\n    const token = localStorage.getItem('spotify_token');\n    if (!token) return;\n\n    const script = document.createElement('script');\n    script.src = 'https://sdk.scdn.co/spotify-player.js';\n    script.async = true;\n    document.body.appendChild(script);\n\n    window.onSpotifyWebPlaybackSDKReady = () => {\n      const newPlayer = new window.Spotify.Player({\n        name: 'Moodify Player',\n        getOAuthToken: cb => cb(token),\n        volume: 0.5,\n      });\n\n      newPlayer.addListener('ready', ({ device_id }) => {\n        console.log('‚úÖ Spotify player ready with device ID:', device_id);\n        localStorage.setItem('device_id', device_id);\n        setDeviceId(device_id);\n      });\n\n      newPlayer.addListener('initialization_error', ({ message }) => {\n        console.error('Initialization Error:', message);\n        setError(message); // üÜï\n      });\n\n      newPlayer.addListener('authentication_error', ({ message }) => {\n        console.error('Auth Error:', message);\n        setError(message); // üÜï\n      });\n\n      newPlayer.addListener('account_error', ({ message }) => {\n        console.error('Account Error:', message);\n        setError(\"This feature requires Spotify Premium.\");\n      });\n\n      newPlayer.addListener('playback_error', ({ message }) => {\n        console.error('Playback Error:', message);\n        setError(message); // üÜï\n      });\n\n      newPlayer.connect().then(success => {\n        if (!success) {\n          console.error(\"‚ùå Player connection failed (likely no Premium).\");\n          setError(\"Spotify Web Playback only works with Premium accounts.\");\n        }\n      });\n\n      setPlayer(newPlayer);\n    };\n  }, []);\n\n  return (\n    <div style={{ padding: \"10px\", backgroundColor: \"#222\", color: \"#fff\" }}>\n      <p>üéµ Spotify Web Playback Initialized</p>\n      {error ? (\n        <p style={{ color: \"red\" }}>‚ö†Ô∏è {error}</p>\n      ) : deviceId ? (\n        <p>Device ID: {deviceId}</p>\n      ) : (\n        <p>Waiting for device ID...</p>\n      )}\n    </div>\n  );\n};\n\nexport default SpotifyPlayer; */import React,{useEffect,useState}from'react';const SpotifyPlayer=()=>{const[player,setPlayer]=useState(null);const[deviceId,setDeviceId]=useState(null);const[error,setError]=useState(null);useEffect(()=>{const token=localStorage.getItem('spotify_token');if(!token)return;const script=document.createElement('script');script.src='https://sdk.scdn.co/spotify-player.js';script.async=true;document.body.appendChild(script);window.onSpotifyWebPlaybackSDKReady=()=>{const newPlayer=new window.Spotify.Player({name:'Moodify Player',getOAuthToken:cb=>cb(token),volume:0.5});newPlayer.addListener('ready',_ref=>{let{device_id}=_ref;console.log('‚úÖ Spotify player ready with device ID:',device_id);localStorage.setItem('device_id',device_id);setDeviceId(device_id);// Optional: Transfer playback to this device\nfetch('https://api.spotify.com/v1/me/player',{method:'PUT',headers:{Authorization:`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify({device_ids:[device_id],play:false})});});newPlayer.addListener('initialization_error',_ref2=>{let{message}=_ref2;return setError(message);});newPlayer.addListener('authentication_error',_ref3=>{let{message}=_ref3;return setError(message);});newPlayer.addListener('account_error',_ref4=>{let{message}=_ref4;return setError(\"This feature requires Spotify Premium.\");});newPlayer.addListener('playback_error',_ref5=>{let{message}=_ref5;return setError(message);});newPlayer.connect();setPlayer(newPlayer);};},[]);// üî∏ Playback control handlers\nconst token=localStorage.getItem('spotify_token');const handlePlay=()=>{const uri=localStorage.getItem(\"last_uri\");// optional\nconst deviceId=localStorage.getItem('device_id');fetch(`https://api.spotify.com/v1/me/player/play?device_id=${deviceId}`,{method:\"PUT\",headers:{Authorization:`Bearer ${token}`},body:JSON.stringify({})// add uris: [] here if you want to play a track\n});};const handlePause=()=>{fetch(\"https://api.spotify.com/v1/me/player/pause\",{method:\"PUT\",headers:{Authorization:`Bearer ${token}`}});};const handleNext=()=>{fetch(\"https://api.spotify.com/v1/me/player/next\",{method:\"POST\",headers:{Authorization:`Bearer ${token}`}});};const handlePrevious=()=>{fetch(\"https://api.spotify.com/v1/me/player/previous\",{method:\"POST\",headers:{Authorization:`Bearer ${token}`}});};return/*#__PURE__*/React.createElement(\"div\",{style:{padding:\"10px\",backgroundColor:\"#222\",color:\"#fff\"}},/*#__PURE__*/React.createElement(\"p\",null,\"\\uD83C\\uDFB5 Spotify Web Playback Initialized\"),error?/*#__PURE__*/React.createElement(\"p\",{style:{color:\"red\"}},\"\\u26A0\\uFE0F \",error):deviceId?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",null,\"Device ID: \",deviceId),/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"10px\"}},/*#__PURE__*/React.createElement(\"button\",{onClick:handlePrevious},\"\\u23EE\\uFE0F\"),/*#__PURE__*/React.createElement(\"button\",{onClick:handlePlay},\"\\u25B6\\uFE0F\"),/*#__PURE__*/React.createElement(\"button\",{onClick:handlePause},\"\\u23F8\\uFE0F\"),/*#__PURE__*/React.createElement(\"button\",{onClick:handleNext},\"\\u23ED\\uFE0F\"))):/*#__PURE__*/React.createElement(\"p\",null,\"Waiting for device ID...\"));};export default SpotifyPlayer;","map":{"version":3,"names":["React","useEffect","useState","SpotifyPlayer","player","setPlayer","deviceId","setDeviceId","error","setError","token","localStorage","getItem","script","document","createElement","src","async","body","appendChild","window","onSpotifyWebPlaybackSDKReady","newPlayer","Spotify","Player","name","getOAuthToken","cb","volume","addListener","_ref","device_id","console","log","setItem","fetch","method","headers","Authorization","JSON","stringify","device_ids","play","_ref2","message","_ref3","_ref4","_ref5","connect","handlePlay","uri","handlePause","handleNext","handlePrevious","style","padding","backgroundColor","color","Fragment","marginTop","onClick"],"sources":["/Users/rutvikzalavadiya/Desktop/capstone-1/capstone/frontend-final/src/SpotifyPlayer.js"],"sourcesContent":["/* import React, { useEffect, useState } from 'react';\n\nconst SpotifyPlayer = () => {\n  const [player, setPlayer] = useState(null);\n  const [deviceId, setDeviceId] = useState(null);\n  const [error, setError] = useState(null); // üÜï\n\n  useEffect(() => {\n    const token = localStorage.getItem('spotify_token');\n    if (!token) return;\n\n    const script = document.createElement('script');\n    script.src = 'https://sdk.scdn.co/spotify-player.js';\n    script.async = true;\n    document.body.appendChild(script);\n\n    window.onSpotifyWebPlaybackSDKReady = () => {\n      const newPlayer = new window.Spotify.Player({\n        name: 'Moodify Player',\n        getOAuthToken: cb => cb(token),\n        volume: 0.5,\n      });\n\n      newPlayer.addListener('ready', ({ device_id }) => {\n        console.log('‚úÖ Spotify player ready with device ID:', device_id);\n        localStorage.setItem('device_id', device_id);\n        setDeviceId(device_id);\n      });\n\n      newPlayer.addListener('initialization_error', ({ message }) => {\n        console.error('Initialization Error:', message);\n        setError(message); // üÜï\n      });\n\n      newPlayer.addListener('authentication_error', ({ message }) => {\n        console.error('Auth Error:', message);\n        setError(message); // üÜï\n      });\n\n      newPlayer.addListener('account_error', ({ message }) => {\n        console.error('Account Error:', message);\n        setError(\"This feature requires Spotify Premium.\");\n      });\n\n      newPlayer.addListener('playback_error', ({ message }) => {\n        console.error('Playback Error:', message);\n        setError(message); // üÜï\n      });\n\n      newPlayer.connect().then(success => {\n        if (!success) {\n          console.error(\"‚ùå Player connection failed (likely no Premium).\");\n          setError(\"Spotify Web Playback only works with Premium accounts.\");\n        }\n      });\n\n      setPlayer(newPlayer);\n    };\n  }, []);\n\n  return (\n    <div style={{ padding: \"10px\", backgroundColor: \"#222\", color: \"#fff\" }}>\n      <p>üéµ Spotify Web Playback Initialized</p>\n      {error ? (\n        <p style={{ color: \"red\" }}>‚ö†Ô∏è {error}</p>\n      ) : deviceId ? (\n        <p>Device ID: {deviceId}</p>\n      ) : (\n        <p>Waiting for device ID...</p>\n      )}\n    </div>\n  );\n};\n\nexport default SpotifyPlayer; */\n\nimport React, { useEffect, useState } from 'react';\n\nconst SpotifyPlayer = () => {\n  const [player, setPlayer] = useState(null);\n  const [deviceId, setDeviceId] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const token = localStorage.getItem('spotify_token');\n    if (!token) return;\n\n    const script = document.createElement('script');\n    script.src = 'https://sdk.scdn.co/spotify-player.js';\n    script.async = true;\n    document.body.appendChild(script);\n\n    window.onSpotifyWebPlaybackSDKReady = () => {\n      const newPlayer = new window.Spotify.Player({\n        name: 'Moodify Player',\n        getOAuthToken: cb => cb(token),\n        volume: 0.5,\n      });\n\n      newPlayer.addListener('ready', ({ device_id }) => {\n        console.log('‚úÖ Spotify player ready with device ID:', device_id);\n        localStorage.setItem('device_id', device_id);\n        setDeviceId(device_id);\n\n        // Optional: Transfer playback to this device\n        fetch('https://api.spotify.com/v1/me/player', {\n          method: 'PUT',\n          headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ device_ids: [device_id], play: false }),\n        });\n      });\n\n      newPlayer.addListener('initialization_error', ({ message }) => setError(message));\n      newPlayer.addListener('authentication_error', ({ message }) => setError(message));\n      newPlayer.addListener('account_error', ({ message }) => setError(\"This feature requires Spotify Premium.\"));\n      newPlayer.addListener('playback_error', ({ message }) => setError(message));\n\n      newPlayer.connect();\n      setPlayer(newPlayer);\n    };\n  }, []);\n\n  // üî∏ Playback control handlers\n  const token = localStorage.getItem('spotify_token');\n\n  const handlePlay = () => {\n    const uri = localStorage.getItem(\"last_uri\"); // optional\n    const deviceId = localStorage.getItem('device_id');\n    fetch(`https://api.spotify.com/v1/me/player/play?device_id=${deviceId}`, {\n      method: \"PUT\",\n      headers: { Authorization: `Bearer ${token}` },\n      body: JSON.stringify({}) // add uris: [] here if you want to play a track\n    });\n  };\n\n  const handlePause = () => {\n    fetch(\"https://api.spotify.com/v1/me/player/pause\", {\n      method: \"PUT\",\n      headers: { Authorization: `Bearer ${token}` },\n    });\n  };\n\n  const handleNext = () => {\n    fetch(\"https://api.spotify.com/v1/me/player/next\", {\n      method: \"POST\",\n      headers: { Authorization: `Bearer ${token}` },\n    });\n  };\n\n  const handlePrevious = () => {\n    fetch(\"https://api.spotify.com/v1/me/player/previous\", {\n      method: \"POST\",\n      headers: { Authorization: `Bearer ${token}` },\n    });\n  };\n\n  return (\n    <div style={{ padding: \"10px\", backgroundColor: \"#222\", color: \"#fff\" }}>\n      <p>üéµ Spotify Web Playback Initialized</p>\n      {error ? (\n        <p style={{ color: \"red\" }}>‚ö†Ô∏è {error}</p>\n      ) : deviceId ? (\n        <>\n          <p>Device ID: {deviceId}</p>\n          <div style={{ marginTop: \"10px\" }}>\n            <button onClick={handlePrevious}>‚èÆÔ∏è</button>\n            <button onClick={handlePlay}>‚ñ∂Ô∏è</button>\n            <button onClick={handlePause}>‚è∏Ô∏è</button>\n            <button onClick={handleNext}>‚è≠Ô∏è</button>\n          </div>\n        </>\n      ) : (\n        <p>Waiting for device ID...</p>\n      )}\n    </div>\n  );\n};\n\nexport default SpotifyPlayer;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}