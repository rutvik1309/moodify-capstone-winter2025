{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';const MyPlaylists=()=>{const[playlists,setPlaylists]=useState([]);const[loading,setLoading]=useState(true);const userId=localStorage.getItem(\"user_id\");const token=localStorage.getItem(\"token\");useEffect(()=>{const fetchUserPlaylists=async()=>{try{const res=await axios.get(`https://moodify-capstone-winter2025.onrender.com/api/playlist/user/${userId}`,{headers:{Authorization:`Bearer ${token}`}});console.log(\"üéß Fetched playlists:\",res.data);// Ensure it's an array\nsetPlaylists(Array.isArray(res.data)?res.data:[]);}catch(error){console.error(\"Error fetching user playlists:\",error);setPlaylists([]);// fallback\n}finally{setLoading(false);}};if(userId&&token){fetchUserPlaylists();}},[userId,token]);const handleDelete=async playlistId=>{try{await axios.delete(`https://moodify-capstone-winter2025.onrender.com/api/playlist/${playlistId}`,{headers:{Authorization:`Bearer ${token}`}});setPlaylists(playlists.filter(p=>p._id!==playlistId));}catch(err){console.error(\"Failed to delete playlist:\",err);}};const handleClearAll=async()=>{if(!window.confirm(\"Are you sure you want to delete all playlists?\"))return;try{await axios.delete(`https://moodify-capstone-winter2025.onrender.com/api/playlist/user/${userId}/clear`,{headers:{Authorization:`Bearer ${token}`}});setPlaylists([]);}catch(err){console.error(\"Failed to clear playlists:\",err);}};const formatDate=isoString=>{const date=new Date(isoString);return date.toLocaleDateString()+' '+date.toLocaleTimeString();};return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h2\",null,/*#__PURE__*/React.createElement(\"span\",{role:\"img\",\"aria-label\":\"music\"},\"\\uD83C\\uDFB5\"),\" My Saved Playlists\"),loading?/*#__PURE__*/React.createElement(\"p\",null,\"Loading playlists...\"):playlists.length===0?/*#__PURE__*/React.createElement(\"p\",null,\"No playlists found.\"):/*#__PURE__*/React.createElement(React.Fragment,null,playlists.map((playlist,index)=>/*#__PURE__*/React.createElement(\"div\",{key:index,style:{marginBottom:\"20px\",borderBottom:\"1px solid #ccc\",paddingBottom:\"10px\"}},/*#__PURE__*/React.createElement(\"h3\",null,playlist.name),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Created:\"),\" \",formatDate(playlist.createdAt)),/*#__PURE__*/React.createElement(\"ul\",null,Array.isArray(playlist.songs)&&playlist.songs.length>0?playlist.songs.map((song,i)=>/*#__PURE__*/React.createElement(\"li\",{key:i},/*#__PURE__*/React.createElement(\"a\",{href:song.url,target:\"_blank\",rel:\"noopener noreferrer\"},song.name,\" - \",song.artist))):/*#__PURE__*/React.createElement(\"li\",null,\"No songs in this playlist.\")),/*#__PURE__*/React.createElement(\"button\",{onClick:()=>handleDelete(playlist._id),style:{backgroundColor:'#dc3545',color:'#fff',padding:'5px 10px',border:'none'}},/*#__PURE__*/React.createElement(\"span\",{role:\"img\",\"aria-label\":\"delete\"},\"\\uD83D\\uDDD1\\uFE0F\"),\" Delete\"))),/*#__PURE__*/React.createElement(\"button\",{onClick:handleClearAll,style:{backgroundColor:'#dc3545',color:'#fff',padding:'8px 15px',border:'none',marginTop:'10px'}},/*#__PURE__*/React.createElement(\"span\",{role:\"img\",\"aria-label\":\"clear\"},\"\\u274C\"),\" Clear All\")));};export default MyPlaylists;","map":{"version":3,"names":["React","useEffect","useState","axios","MyPlaylists","playlists","setPlaylists","loading","setLoading","userId","localStorage","getItem","token","fetchUserPlaylists","res","get","headers","Authorization","console","log","data","Array","isArray","error","handleDelete","playlistId","delete","filter","p","_id","err","handleClearAll","window","confirm","formatDate","isoString","date","Date","toLocaleDateString","toLocaleTimeString","createElement","className","role","length","Fragment","map","playlist","index","key","style","marginBottom","borderBottom","paddingBottom","name","createdAt","songs","song","i","href","url","target","rel","artist","onClick","backgroundColor","color","padding","border","marginTop"],"sources":["/Users/rutvikzalavadiya/Desktop/capstone-1/capstone/frontend-final/src/Myplaylists.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nconst MyPlaylists = () => {\n  const [playlists, setPlaylists] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const userId = localStorage.getItem(\"user_id\");\n  const token = localStorage.getItem(\"token\");\n\n  useEffect(() => {\n    const fetchUserPlaylists = async () => {\n      try {\n        const res = await axios.get(`https://moodify-capstone-winter2025.onrender.com/api/playlist/user/${userId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n\n        console.log(\"üéß Fetched playlists:\", res.data);\n\n        // Ensure it's an array\n        setPlaylists(Array.isArray(res.data) ? res.data : []);\n      } catch (error) {\n        console.error(\"Error fetching user playlists:\", error);\n        setPlaylists([]); // fallback\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (userId && token) {\n      fetchUserPlaylists();\n    }\n  }, [userId, token]);\n\n  const handleDelete = async (playlistId) => {\n    try {\n      await axios.delete(`https://moodify-capstone-winter2025.onrender.com/api/playlist/${playlistId}`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setPlaylists(playlists.filter((p) => p._id !== playlistId));\n    } catch (err) {\n      console.error(\"Failed to delete playlist:\", err);\n    }\n  };\n\n  const handleClearAll = async () => {\n    if (!window.confirm(\"Are you sure you want to delete all playlists?\")) return;\n\n    try {\n      await axios.delete(`https://moodify-capstone-winter2025.onrender.com/api/playlist/user/${userId}/clear`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setPlaylists([]);\n    } catch (err) {\n      console.error(\"Failed to clear playlists:\", err);\n    }\n  };\n\n  const formatDate = (isoString) => {\n    const date = new Date(isoString);\n    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();\n  };\n\n  return (\n    <div className=\"container\">\n      <h2><span role=\"img\" aria-label=\"music\">üéµ</span> My Saved Playlists</h2>\n      {loading ? (\n        <p>Loading playlists...</p>\n      ) : playlists.length === 0 ? (\n        <p>No playlists found.</p>\n      ) : (\n        <>\n          {playlists.map((playlist, index) => (\n            <div key={index} style={{ marginBottom: \"20px\", borderBottom: \"1px solid #ccc\", paddingBottom: \"10px\" }}>\n              <h3>{playlist.name}</h3>\n              <p><strong>Created:</strong> {formatDate(playlist.createdAt)}</p>\n              <ul>\n                {Array.isArray(playlist.songs) && playlist.songs.length > 0 ? (\n                  playlist.songs.map((song, i) => (\n                    <li key={i}>\n                      <a href={song.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                        {song.name} - {song.artist}\n                      </a>\n                    </li>\n                  ))\n                ) : (\n                  <li>No songs in this playlist.</li>\n                )}\n              </ul>\n              <button\n                onClick={() => handleDelete(playlist._id)}\n                style={{ backgroundColor: '#dc3545', color: '#fff', padding: '5px 10px', border: 'none' }}\n              >\n                <span role=\"img\" aria-label=\"delete\">üóëÔ∏è</span> Delete\n              </button>\n            </div>\n          ))}\n          <button\n            onClick={handleClearAll}\n            style={{ backgroundColor: '#dc3545', color: '#fff', padding: '8px 15px', border: 'none', marginTop: '10px' }}\n          >\n            <span role=\"img\" aria-label=\"clear\">‚ùå</span> Clear All\n          </button>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default MyPlaylists;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}